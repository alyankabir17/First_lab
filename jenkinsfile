pipeline {
    agent { label 'local-agent' }

    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }

        stage('Testing') {
            steps {
                echo 'Performing Syntax Check...'
                // This checks if the python code is valid without actually running the full script
                sh 'python3 -m py_compile jenkins.py'
                echo 'Testing Complete: No syntax errors found.'
            }
        }

        stage('Run Script') {
            steps {
                echo 'Executing main logic...'
                sh 'python3 jenkins.py'
            }
        }

        stage('Deployment') {
            steps {
                echo 'Deploying application...'
                // Creating a "production" directory and copying the script there
                sh 'mkdir -p /home/alyan/production_app'
                sh 'cp jenkins.py /home/alyan/production_app/'
                echo 'Application successfully deployed to /home/alyan/production_app'
            }
        }
    }
    
    post {
        success {
            echo 'Pipeline finished successfully!'
        }
        failure {
            echo 'Pipeline failed. Please check the specific stage logs.'
        }
    }
}



pipeline{

    agent any
    stages{
        stage("build") {
            steps{
                echo(" building the application...")
            }
        }
    

        stage("test") {
            steps{
            echo("testing the application...")
            }
        }
    

        stage("deploy") {
            steps{
            echo(" deploying the application...")
            }
        }
    }
    post{
        always {
        // execute some logic after all th stages
    }
        success {
        // execute some logic after build succeed
    }
        failure {
        // execute some logic after build failed
    }
}
}


